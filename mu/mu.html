<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <!-- style -->
  <link rel="stylesheet" href="../libs/css/element-ui-2.8.2.css">
  <link rel="stylesheet" href="../libs/css/font.css">
  <link rel="stylesheet" href="mu.css">

  <!-- library -->
  <script src="../libs/jquery-3.2.1.min.js"></script>
  <script src="../libs/fabric.min.js"></script>
  <script src="../libs/vue-2.6.10.js"></script>
  <script src="../libs/element-ui-2.7.2.js"></script>

  <!-- custom -->
  <script src="../libs/ajax-1.2.0.js"></script>
  <script src="mu.js"></script>
  <script>
    window.cavs = {host: 'localhost', port: 3201, name: 'Canval Grap', version: '1.0.0 bate'}
    window.cavs.port_cfg = {port: window.cavs.port}
    $(function () {
      MU.init();
    })
  </script>
</head>
<body>
<div id="app">
  <div>
    <el-button @click="handleDialogShow">添加</el-button>
    <el-button @click="handleDialogSaveCanvas">保存数据</el-button>
    <el-button @click="handleDialogLoadCanvas">加载数据</el-button>
    <el-select @change="handleSelectDataToRedraw" value="" placeholder="请选择">
      <el-option
          v-for="item in dataCanvasDatas"
          :key="item.id"
          :label="'data.'+item.id"
          :value="item.content">
      </el-option>
    </el-select>
  </div>
  <div class="draw-area">
    <canvas id="canvas" width='800' height='600'></canvas>
    <div>
    </div>
  </div>
  <div class="foolr-slow">
    <ul>
      <li v-for="ast in dataAssets">
        <img :src="photoDir + ast.photo" :alt="ast.name" width="40" height="40"
             :title="'双击添加'+ ast.name + '设备'" @dblclick="handleAssetDclick(ast)">
      </li>
    </ul>
  </div>

  <div class="exp">
    <el-dialog
        :title="assetEditDialog.title[assetEditDialog.active]"
        :visible.sync="assetEditDialog.visibleAssetDialog"
        :width="assetEditDialog.width"
        :before-close="handleDialogClose"
    >
      <el-form :model="formAsset">
        <el-form-item label="设备编号">
          <el-input v-model="formAsset.code" auto-complete="off"></el-input>
        </el-form-item>

        <el-form-item label="设备名称">
          <el-input v-model="formAsset.name" auto-complete="off"></el-input>
        </el-form-item>

        <el-form-item label="设备额定电压">
          <el-input v-model="formAsset.voltage" auto-complete="off"></el-input>
        </el-form-item>

        <el-form-item label="设备额定电压">
          <el-input v-model="formAsset.current" auto-complete="off"></el-input>
        </el-form-item>

        <el-form-item label="设备额定功率">
          <el-input v-model="formAsset.power" auto-complete="off"></el-input>
        </el-form-item>

        <el-form-item label="图片">
          <input type="file" @change="handleDialogFileChange"/>
        </el-form-item>
      </el-form>

      <!-- button -->
      <span slot="footer" class="dialog-footer">
        <el-button @click="handleDialogCancel">取 消</el-button>
        <el-button type="primary" @click="handleDialogSave">确 定</el-button>
      </span>
    </el-dialog>
  </div>
</div>
</body>
</html>